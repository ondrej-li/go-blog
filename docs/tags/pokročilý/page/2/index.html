<!doctype html>
<html>
<head>
    <base href="/">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="author" content="Ondřej Linek">

<meta name="description" content="">

<title>Pokročilý</title>
<meta name="generator" content="Hugo 0.146.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/pojoaque.min.css">

<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>

<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
<link  href="https://go.ondralinek.cz//css/theme.min.css" rel="stylesheet" type="text/css">

</head>
<body>
<div class="page-container container-fluid">
<div class="col-md-3 menu">
    <nav class="col-md-3">
    <h3 class="home-link"><a href="https://go.ondralinek.cz/">Root</a></h3>
    <div id="last-posts" class="open">
        <h3 data-open="last-posts">Jazyk #Go(lang) - Nejnovější příspěvky</h3>
        <ul>
            
            <li><a href="https://go.ondralinek.cz/post/mage-2/">Mage - kompilace</a></li>
            
            <li><a href="https://go.ondralinek.cz/post/mage/">Mage - nástroj pro sestavování (nejen) Go programů</a></li>
            
            <li><a href="https://go.ondralinek.cz/post/serial-o-go/">Seriál o Go na root.cz</a></li>
            
            <li><a href="https://go.ondralinek.cz/post/struktura-programu-2-roky-po-te/">Struktura programu 2 roky po té</a></li>
            
            <li><a href="https://go.ondralinek.cz/post/mini-service/">Mini služby</a></li>
            
            <li><a href="https://go.ondralinek.cz/post/smutny-den/">Smutný den pro #Go</a></li>
            
            <li><a href="https://go.ondralinek.cz/post/reflexe/">Reflexe v #Go</a></li>
            
            <li><a href="https://go.ondralinek.cz/post/1-9-3/">1.9.3</a></li>
            
            <li><a href="https://go.ondralinek.cz/post/go-vercajk/">Go vercajk</a></li>
            
            <li><a href="https://go.ondralinek.cz/post/throttling-v-go/">Throttling v Go</a></li>
            
        </ul>
    </div>

    
    <div id="tags" class="open">
        <h3 data-open="tags">Tagy</h3>
        <ul class="tags">
            
            <li><a href="/tags/n%C3%A1zory">názory</a></li>
            
            <li><a href="/tags/od-jinud">od jinud</a></li>
            
            <li><a href="/tags/ozn%C3%A1men%C3%AD">oznámení</a></li>
            
            <li><a href="/tags/pokro%C4%8Dil%C3%BD">pokročilý</a></li>
            
            <li><a href="/tags/za%C4%8D%C3%A1tky">začátky</a></li>
            
        </ul>
    </div>
    

    
    <div id="categories" class="open">
        <h3 data-open="categories">Kategorie</h3>
        <ul class="categories">
            
            <li><a href="/categories/n%C3%A1zory">názory</a></li>
            
            <li><a href="/categories/od-jinud">od jinud</a></li>
            
            <li><a href="/categories/ozn%C3%A1men%C3%AD">oznámení</a></li>
            
            <li><a href="/categories/pokro%C4%8Dil%C3%BD">pokročilý</a></li>
            
            <li><a href="/categories/za%C4%8D%C3%A1tky">začátky</a></li>
            
        </ul>
    </div>
    
</nav>

</div>
<div class="col-md-9 content">


<div class="articles-list">
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/jak-funguji-go-rutiny/">Jak fungují Go rutiny</a> - 2017-01-05 11:17:19</h3>
        <p>Dnes si povíme něco o <em>Go</em> rutinách. Všichni víme, že se používají, pokud chceme pracovat paralelně. Všichni určitě i víme, že <em>Go</em> rutiny nejsou thready (vlákna). Co tedy jsou <em>Go</em> rutiny a proč se používají?</p>
<p>Prvně, proč <em>Go</em> nepoužívá vlákna? <em>Go</em> vlákna používá, ale nepoužívá je 1:1 ke <em>Go</em> rutinám. Vlákno, jakkoliv se používají často, je má svoji režii. Režii na úrovni operačního systému (je to OS, kdo vlákna vytváří), režii na úrovni správy (je potřeba vlákna časovat a přepínat) a režii na úrovni paměti a registrů procesoru (je potřeba při přepínání vlákna ukládat prakticky všechny registry procesoru). Jak je zřejmé, pokud bychom chtěli mít tisíce Go rutin, tak by režie OS byla natolik veliká, že by se systém zhroutil.</p>
    </article>
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/neco-malo-o-pointerech/">Něco málo o pointerech</a> - 2016-11-07 16:36:40</h3>
        <p>Dnes jsem si uvědomil jednu věc. V <em>Go</em> se to množí pointery, ale vlastně mnozí čtenáři tohoto blogu, kteří přicházejí ke <em>Go</em> ze světa JavaScriptu, Javy a dalších jazyků bez pointerů (v Česku známé také jako ukazatele), mohou být mírně zmatení, o čem to tu stále hovořím.</p>
<p>Než se pustím do dalších příkladů, tak jen ve zkratce pro znalce <em>C</em> a podobných jazyků, které pointery mají. V <em>Go</em> se vždy přenášejí parametry hodnotou. A to včetně hodnoty pointerů. Rozumíme si :-)</p>
    </article>
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/chyby-se-stacktrace-v-go/">Chyby se stacktrace v #Go</a> - 2016-11-03 11:27:03</h3>
        <p>Snad každý kdo přichází do světa <em>Go</em> ze světa Javy se diví, proč chyby v <em>Go</em> nemají stacktrace. Vždyť přeci chci vědět kde se chyba stala. A mají pravdu, standardní chyby v <em>Go</em> stacktrace nemají. Ale to není proto, že by autoři <em>Go</em> byli snad sadisti, co se vyžívají ve zmatení uživatelů jazyka. Je to proto, že v <em>Go</em> jsou chyby jen interfacy. Tzn. cokoliv co implementuje interface <code>error</code> je automaticky chybou. A vzhledem k tomu, že interface <code>error</code> má jen jednu  funkci <code>Error() string</code>, tak je jeho implementace více než jednoduchá.</p>
    </article>
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/objektove-programovani-vs-golang/">Objektové programování vs. #Golang</a> - 2016-10-24 19:15:30</h3>
        <p>Dnes se podíváme na <em>Go</em> tak trochu filozoficky. Je, nebo není <em>Go</em> objektový jazyk, jak v tomto smyslu vypadá jeho srovnání se v současnosti nejpopulárnějším jazykem Java?</p>
<p><em>Go</em> je opravdu tak trochu jako chytrá horákyně. Je funkcionální, ale ne zcela, je objektový, ale ne zcela. Než začne polemizovat o objektovosti <em>Go</em>, pojďme si připomenout, co dělá jazyk objektovým.</p>
<ul>
<li>Třídy a objekty. Vše jsou objekty a objekty jsou instance tříd.</li>
<li>Zapouzdření. Data a operace nad daty jedno jsou.</li>
<li>Dědičnost. Třídy dědí svoje vlastnosti a potomek třídy je specializací svého rodiče.</li>
<li>Polymorfismus. Potomek dovede nahradit svého předka.</li>
<li>Přetěžování. Metoda může mít stejné jméno, ale jiné parametry.</li>
</ul>
<p>Nuže. <em>Go</em> nemá třídy a objekty. Má ovšem struktury a funkce, které nad nimi operují, tzv. přijímače (receivers). Jelikož volání přijímače nad strukturou se označuje operátorem tečky, tak to v kódu vypadá stejně, jako např. v Javě.</p>
    </article>
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/zjisteni-jestli-mapa-obsahuje-klic/">Zjištění, jestli mapa obsahuje klíč</a> - 2016-10-20 08:05:29</h3>
        <p>Každý potřebujeme čas od času zjistit, jestli je v mapě položka pod daným klíčem. V <em>Go</em> se to dělá velmi jednoduše.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>	<span style="color:#a6e22e">mapa</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">string</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;položka1&#34;</span>: <span style="color:#e6db74">&#34;hodnota1&#34;</span>,
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">hodnota1</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">mapa</span>[<span style="color:#e6db74">&#34;položka1&#34;</span>]; <span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Hurá, mapa má klíč &#39;položka1&#39;: [%s]\n&#34;</span>, <span style="color:#a6e22e">hodnota1</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">hodnota2</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">mapa</span>[<span style="color:#e6db74">&#34;položka2&#34;</span>]; !<span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Bohužel, klíč &#39;položka2&#39; není v mapě. Posuďte sami: [%#v], [%s]&#34;</span>, <span style="color:#a6e22e">mapa</span>, <span style="color:#a6e22e">hodnota2</span>)
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div><p>Mimochodem, podobný postup se používá i v situaci, kdy si chcete ověřit typ proměnné.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>	<span style="color:#a6e22e">cokoliv</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">interface</span>{}(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cokoliv</span>.(<span style="color:#66d9ef">int</span>); <span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Sláva, cokoliv je int!&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cokoliv</span>.(<span style="color:#66d9ef">string</span>); <span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Sláva, cokoliv je string!&#34;</span>)
</span></span><span style="display:flex;"><span>	} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Bohužel cokoliv není string&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div>
    </article>
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/pracujeme-s-poli/">Pracujeme s poli</a> - 2016-10-17 11:27:00</h3>
        <p>Práce s poli patří k základům prakticky všeho. Pokud mám něčeho více jak jedna, tak se z toho stává pole.
Běžně rozlišujeme tři typy polí:</p>
<ul>
<li>obyčejné pole. V <em>Go</em> se deklaruje jako <code>[n]T</code> např.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>   <span style="color:#a6e22e">pole</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">10</span>]<span style="color:#66d9ef">int</span>
</span></span></code></pre></div><p>Všimněte si, že <code>pole</code> je typu <code>[10]int</code>. Tzn. velikost pole se nedá změnit. Pokud tedy předem víte, kolik
prvků potřebujete a nechcete aby se to dalo změnit, pak je pole právě pro vás.</p>
<ul>
<li>seznam. V <em>Go</em> se mu říká <code>slice</code>. Deklaruje se jako <code>[]T</code> např. <code>[]int</code>. Pokud chcete, můžete si u něj nastavit jeho
počáteční kapacitu. Ovšem nikoliv při deklaraci, ale při inicializaci. Tedy např.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>   <span style="color:#a6e22e">seznam</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">10</span>) <span style="color:#75715e">// počáteční velikost pole je 10</span>
</span></span></code></pre></div><ul>
<li>množina. Mnoho jazyků přímo podporuje množiny, anlicky <code>set</code>. <em>Go</em> mezi takové jazyky nepatří, a tak musíte vzít za vděk
nějakou knihovnou , která tuto funkcionalitu nabízí. Jen pro přesnost, množiny nejsou setříděné a neumožňují duplikáty.</li>
</ul>
<p>Teď nejběžnějši operace nad poli, nebo slicy. Prvně si pole vytvoříme.</p>
    </article>
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/vetveni-podle-typu-promenne-v-golang/">Větvení podle typu proměnné v #Golang</a> - 2016-10-13 05:34:53</h3>
        <p>Někdy je potřeba si větvit program podle toho, jakého je proměnná typu. Typický příklad je <code>interface{}</code>. Jelikož se jedná o prázdný interface, tak jím může být cokoliv. Co když ale chcete jinak pracovat s <code>int</code> a jinak se <code>string</code>?</p>
<p>Následující příklad vám to ukáže.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">proměnná</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">inteface</span>{}(<span style="color:#ae81ff">1</span>) <span style="color:#75715e">// přetypujeme int 1 na interface{}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">proměnná</span>.(<span style="color:#66d9ef">type</span>) { <span style="color:#75715e">// podle typu proměnné</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">case</span> <span style="color:#66d9ef">int</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Je to int!&#34;</span>) 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">printString</span>(<span style="color:#e6db74">&#34;Je to záhada&#34;</span>)     
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Jak vidno, prosté.</p>
    </article>
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/golang-a-multithreading/">#Golang a multithreading</a> - 2016-10-09 07:19:14</h3>
        <p>Tento článek jsem si nechával na slavnostní chvíle a ta zrovna přišla. Dnes si povíme o to paralelismu v <em>Go</em>.</p>
<p>V první řadě, co je to multithreading? Je to schopnost programu, dělat několik věcí najednou. Tedy například stáhnout stránku a číst z terminálu. Řeknete si, to přeci není problém, jen co uživatel stiskne tlačítko, tak prostě na konzoli vypíšu co, napsal. Třeba následovně.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Print</span>(<span style="color:#e6db74">&#34;Napiš něco: &#34;</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">input</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Scanln</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">input</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">input</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;http://www.google.cz/&#34;</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Copy</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>, <span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>.<span style="color:#a6e22e">Close</span>()
</span></span></code></pre></div><p>Samozřejmě to takhle jde, ale je to když budete chtít ještě během toho vypisovat např. aktuální čas? Nebo ukazovat, jak píše jiný uživatel na jiném počítači. Nakonec skončíte u nějaké podobné smyčky.</p>
    </article>
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/golang-a-pristup-k-databazi/">#Golang a přístup k databázi</a> - 2016-09-27 05:31:55</h3>
        <p>V dnešní době nad neexistuje aplikace, která by nepřistupovala do databáze. Samozřejmě si můžeme ukládat data do souboru a mnohdy je to i efektivnější řešení, ale databáze nám luxusně umožní data ukládat a načítat a nestarat se přitom o detaily. V dnešní době rozdělujeme databáze do 2 proudů.</p>
<ul>
<li>SQL databáze (nebo také relační databáze) - tedy databáze, kde jsou data ukládána jako relace mezi entitami. Většina z nich také garantuje ACID (atomičnost operací, konzistenci stav, integritu dat a durabilitu uložení). Mezi nejznámější patři <a href="https://www.mysql.com/">MySql</a>, <a href="https://www.postgresql.org/">PostgreSQL</a>, <a href="https://www.oracle.com/database/index.html">Oracle</a>, MS SQL Server atd.</li>
<li>NoSQL databáze - tedy databáze, které nevyžadují  striktní schéma (ad hoc ukládání dat) místo ACID používají <a href="https://en.wikipedia.org/wiki/Eventual_consistency">BASE</a> (pouze základní dostupnost, měnící se (měkký) stav a eventuální konzistenci) - což samo osobě je slovní hříčka - prostě kyselost a zásaditost :-). Představily jsou <a href="https://www.mongodb.com/">MongoDB</a>, <a href="http://redis.io/">Redis</a>, <a href="http://cassandra.apache.org/">Apache Cassandra</a>, <a href="https://www.elastic.co/products/elasticsearch">ElesticSearch</a> apod.</li>
</ul>
<p>Dnes si povíme, jak přistupovat k SQL databázím. Už proto, že <em>Go</em> tyto databáze standardizuje, na rozdíl od NoSQL, kde standard není.</p>
    </article>
    
    <article>
        <h3><a href="https://go.ondralinek.cz/post/testujeme-v-golang-cast-2/">Testujeme v #Golang (část 2)</a> - 2016-09-24 11:56:57</h3>
        <p>V první části povídání o testování jsme si ukázali vcelku jednoduchý test a spustili jsme si jej.</p>
<p>Jedním z požadavků na testování je, aby testy doběhly co nejdříve. Je to proto, že chceme mít smyčku zpětné vazby co nejkratší. Nikdo nestojí o to, aby čekal více jak minutu na informaci, že je všechno v pořádku. Ale pak se naskytuje otázka - co v případě, že test závisí na něčem pomalém. Třeba databázi. Nebo volání externí služby přes HTTP. V tom případě tu máme celou plejádu možností a podíváme se na ně.</p>
    </article>
    
</div>

    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/tags/pokro%C4%8Dil%C3%BD/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/tags/pokro%C4%8Dil%C3%BD/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/tags/pokro%C4%8Dil%C3%BD/" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item">
        <a href="/tags/pokro%C4%8Dil%C3%BD/page/3/" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/tags/pokro%C4%8Dil%C3%BD/page/3/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/tags/pokro%C4%8Dil%C3%BD/page/3/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
</div>
</div>
<script src="https://go.ondralinek.cz//js/theme.min.js" type="text/javascript"></script>


</body>
</html>

